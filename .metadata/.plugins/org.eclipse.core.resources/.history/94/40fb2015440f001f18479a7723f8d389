package windows.window;

import java.awt.Color;
import java.awt.FlowLayout;
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.InputStream;
import java.io.InputStreamReader;

import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JPasswordField;
import javax.swing.JTextField;

import windows.actions.Bouton_connect;
import windows.actions.Menu_principal_apropos;
import windows.actions.Menu_principal_quit;

@SuppressWarnings("serial")
public class pannel_connect extends JPanel {

	private JLabel Titre;
	private JFrame frame;
	private JLabel labeluser;
	private JLabel labelpass;
	private JTextField mail;
	private JPasswordField password;
	private JButton connect;
	private JComboBox status;
	private JCheckBox save;
	private String autouser,autopass;
	private String fichier;
	private String chaine;
	
	public pannel_connect(JFrame fram){
		auto();
		frame = fram;
		pan= new JPanel();
		BuildFenetre();
		
		
	}

	private void auto(){
		autouser="";
		autopass="";
		fichier ="fichier.txt";
		chaine="";
		try{
			InputStream ips=new FileInputStream(fichier); 
			InputStreamReader ipsr=new InputStreamReader(ips);
			BufferedReader br=new BufferedReader(ipsr);
			String ligne;
			while ((ligne=br.readLine())!=null){
				chaine+=ligne+"\n";
			}
			br.close();
			String tab[]=chaine.split("\n");
				autouser=tab[0];
				autopass=tab[1];
		}		
		catch (Exception e){
			System.out.println(e.toString());
		}
	}
	
	private void BuildFenetre(){

		setLayout(new FlowLayout());
		setBackground(new Color(128,128,255));
		setLayout(new FlowLayout(FlowLayout.CENTER,200,10));

		Menu_principal();
		
		Titre=new JLabel("Bienvenue dans Tut Messenger",JLabel.CENTER);
		//image
		labeluser = new JLabel("Adresse e-mail");
		mail = new JTextField(autouser,15);
		labelpass = new JLabel("Mot de passe");
		password = new JPasswordField(autopass,15);
		status= new JComboBox();
		status.addItem("Offline");
		status.addItem("Online");
		status.addItem("Busy");
		status.addItem("AFK");
		save = new JCheckBox("Enregistrer les infos");
		if(autouser!="" && autopass !="")
			save.setSelected(true);
		connect=new JButton("Connexion");
		connect.addActionListener(new Bouton_connect(status,mail,password,save));


		add(Titre);
		add(labeluser);
		add(mail);
		add(labelpass);
		add(password);
		add(status);
		add(save);		
		add(connect);
		
	
		frame.add(this);        
		frame.setVisible(true); 
	}
	
	private void Menu_principal() {
		JMenuBar menuBar = new JMenuBar();
		JMenu menu1 = new JMenu("Menu");
		JMenu menu2 = new JMenu("?");
		JMenuItem quitter;
		JMenuItem aPropos;
		
		/*contenu du menu "menu":*/
		quitter = new JMenuItem("Quitter");
		quitter.addActionListener(new Menu_principal_quit());
		menu1.add(quitter);
		menuBar.add(menu1);

		/*contenu du menu "?":*/
		aPropos = new JMenuItem("A propos");
		aPropos.addActionListener(new Menu_principal_apropos());
		menu2.add(aPropos);
		menuBar.add(menu2);
		frame.setJMenuBar(menuBar);

	}
}
